<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Student Flow</title>
    <link rel="manifest" href="manifest.json">
<meta name="theme-color" content="#0f0f0f">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="mobile-web-app-capable" content="yes">
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; font-family: 'Segoe UI', Roboto, sans-serif; -webkit-tap-highlight-color: transparent; }
        body { background: #000; color: white; height: 100vh; width: 100vw; overflow: hidden; position: fixed; }.orb { position: absolute; border-radius: 50%; filter: blur(80px); z-index: -1; opacity: 0.3; animation: float 10s infinite alternate ease-in-out; }
    .orb-1 { width: 300px; height: 300px; background: #00fff2; top: -50px; left: -50px; }
    .orb-2 { width: 250px; height: 250px; background: #ff005c; bottom: 50px; right: -50px; animation-delay: -5s; }
    @keyframes float { 0% { transform: translate(0, 0) scale(1); } 100% { transform: translate(40px, 60px) scale(1.1); } }

    #splash-screen { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: #000; display: flex; flex-direction: column; justify-content: center; align-items: center; z-index: 3000; transition: opacity 0.5s ease; pointer-events: none; }
    #app-content { padding: 40px 20px; height: 100vh; display: none; opacity: 0; transition: opacity 0.8s ease; position: relative; }
    header h1 { font-size: 32px; font-weight: 200; margin-bottom: 30px; }
    header h1 span { font-weight: 800; background: linear-gradient(to right, #00fff2, #ff005c); -webkit-background-clip: text; -webkit-text-fill-color: transparent; }

    .menu-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 15px; }
    .card { height: 140px; border-radius: 25px; background: rgba(255, 255, 255, 0.05); backdrop-filter: blur(15px); border: 1px solid rgba(255,255,255,0.1); display: flex; flex-direction: column; justify-content: center; align-items: center; opacity: 0; transform: translateY(20px); transition: 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275); }
    .card:active { transform: scale(0.95); }
    .card-icon { font-size: 32px; margin-bottom: 10px; }
    .card-title { font-size: 13px; font-weight: 600; color: #ccc; }
    .animate-card { animation: cardIn 0.6s forwards; }
    @keyframes cardIn { to { opacity: 1; transform: translateY(0); } }

    /* ZEN MODU & ANƒ∞MASYONLAR */
    .modal { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.97); backdrop-filter: blur(25px); z-index: 2000; display: none; flex-direction: column; align-items: center; justify-content: center; padding: 30px 20px; opacity: 0; transition: opacity 0.4s ease; }
    
    .timer-container { position: relative; width: 280px; height: 280px; display: flex; justify-content: center; align-items: center; margin: 30px 0; }
    svg.timer-svg { position: absolute; width: 100%; height: 100%; transform: rotate(-90deg); }
    circle.bg { fill: none; stroke: rgba(255,255,255,0.05); stroke-width: 10; }
    circle.progress { fill: none; stroke: #00fff2; stroke-width: 10; stroke-linecap: round; stroke-dasharray: 816; stroke-dashoffset: 816; transition: stroke-dashoffset 1s linear; }
    #timer-text { font-size: 72px; font-weight: 800; letter-spacing: -2px; transition: color 0.3s; }
    
    /* Biti≈ü Animasyonlarƒ± */
    @keyframes shake { 0% { transform: translateX(0); } 25% { transform: translateX(-5px) rotate(-5deg); } 50% { transform: translateX(5px) rotate(5deg); } 75% { transform: translateX(-5px); } 100% { transform: translateX(0); } }
    @keyframes popIn { 0% { transform: scale(0); opacity: 0; } 70% { transform: scale(1.1); opacity: 1; } 100% { transform: scale(1); } }
    @keyframes pulseRed { 0% { transform: scale(1); opacity: 1; } 50% { transform: scale(1.05); opacity: 0.8; } 100% { transform: scale(1); opacity: 1; } }

    .zen-finished-text { color: #ff005c !important; animation: pulseRed 1s infinite; }
    .pip-finished { background: #ff005c !important; border-color: #ff005c !important; animation: shake 0.5s infinite !important; }

    /* PIP (Mini Zen) */
    #mini-zen { position: fixed; top: 20px; left: 20px; padding: 12px 20px; border-radius: 25px; background: rgba(255, 255, 255, 0.1); backdrop-filter: blur(20px); display: none; align-items: center; gap: 10px; z-index: 2500; border: 1px solid rgba(255,255,255,0.1); transform-origin: top left; }
    .pop-in-anim { animation: popIn 0.5s cubic-bezier(0.175, 0.885, 0.32, 1.275) forwards; }

    /* Dƒ∞ƒûER MOD√úLLER */
    .notes-sub-nav { display: grid; grid-template-columns: 1fr 1fr; gap: 12px; margin-bottom: 20px; width: 100%; flex-shrink: 0; }
    .tab-btn { padding: 18px; border-radius: 20px; border: 1px solid rgba(255,255,255,0.08); background: rgba(255,255,255,0.03); color: #888; font-size: 14px; text-align: center; transition: 0.3s; }
    .tab-btn.active { background: linear-gradient(135deg, #00fff2, #00a199); color: #000; border: none; font-weight: 800; box-shadow: 0 10px 20px rgba(0, 255, 242, 0.2); }

    .grade-header { display: grid; grid-template-columns: 2fr 1fr 1fr 1fr; gap: 10px; padding: 0 15px; margin-bottom: 15px; font-size: 12px; color: #00fff2; font-weight: 800; opacity: 0.8; flex-shrink: 0; }
    .grade-row { display: grid; grid-template-columns: 2fr 1fr 1fr 1fr; gap: 10px; background: rgba(255,255,255,0.04); padding: 16px; border-radius: 22px; align-items: center; margin-bottom: 12px; border: 1px solid rgba(255,255,255,0.05); }
    .grade-row input { width: 100%; background: rgba(0,0,0,0.2); border: 1px solid rgba(255,255,255,0.1); border-radius: 12px; color: white; padding: 10px 5px; text-align: center; outline: none; font-size: 14px; }
    .grade-avg-box { font-weight: 800; color: #00fff2; text-shadow: 0 0 10px rgba(0,255,242,0.3); }

    #grade-entry-view { width: 100%; display: flex; flex-direction: column; flex: 1; overflow: hidden; min-height: 0; }
    #analysis-view { width: 100%; display: none; flex: 1; overflow-y: auto; padding-bottom: 20px; min-height: 0; }

    .btn-circle { width: 65px; height: 65px; border-radius: 50%; border: 1px solid rgba(255,255,255,0.1); background: rgba(255,255,255,0.05); color: white; display: flex; justify-content: center; align-items: center; font-size: 22px; }
    .btn-main { padding: 20px 45px; border-radius: 35px; border: none; background: #00fff2; color: #000; font-weight: 800; cursor: pointer; text-transform: uppercase; letter-spacing: 1.5px; box-shadow: 0 10px 25px rgba(0, 255, 242, 0.2); flex-shrink: 0; }

    .list-container { width: 100%; flex: 1; overflow-y: auto; padding: 10px 5px; min-height: 0; }
    .input-area { width: 100%; display: flex; flex-direction: column; gap: 10px; padding: 20px; background: rgba(255,255,255,0.06); border-radius: 28px; border: 1px solid rgba(255,255,255,0.1); margin-top: 10px; flex-shrink: 0; }
    .input-row { display: flex; gap: 10px; width: 100%; align-items: center; }
    .input-area input { background: rgba(0,0,0,0.3); border: 1px solid rgba(255,255,255,0.1); border-radius: 15px; color: white; padding: 15px; flex: 1; outline: none; }
    
    .note-item { background: rgba(255,255,255,0.04); border: 1px solid rgba(255,255,255,0.08); padding: 18px; border-radius: 22px; margin-bottom: 12px; }
    .note-item.pinned { border-left: 5px solid #00fff2; background: rgba(0, 255, 242, 0.05); }
    
    .prog-item { background: rgba(255,255,255,0.05); padding: 18px; border-radius: 24px; margin-bottom: 12px; border-left: 5px solid #ff005c; }
    .day-bar { display: flex; gap: 12px; overflow-x: auto; width: 100%; padding: 10px 0 20px 0; scrollbar-width: none; flex-shrink: 0; }
    .day-btn { padding: 12px 25px; border-radius: 18px; background: rgba(255,255,255,0.05); border: 1px solid rgba(255,255,255,0.1); color: #888; font-size: 13px; white-space: nowrap; }
    .day-btn.active { background: #ff005c; color: white; border: none; box-shadow: 0 8px 15px rgba(255, 0, 92, 0.3); }

    /* COREVIA IMZA */
    .footer-brand { position: absolute; bottom: 20px; left: 0; width: 100%; text-align: center; opacity: 0.3; font-size: 10px; letter-spacing: 2px; font-weight: 300; pointer-events: none; }
</style>

</head>
<body>
    <div class="orb orb-1"></div>
    <div class="orb orb-2"></div><div id="mini-zen" onclick="openZen()">
    <div id="mini-indicator" style="width:10px; height:10px; background:#00fff2; border-radius:50%; box-shadow: 0 0 10px #00fff2;"></div>
    <span id="mini-timer-text">25:00</span>
</div>

<div id="splash-screen">
    <h1 style="letter-spacing: 10px; font-weight: 200;">STUDENT<br><b style="font-weight: 800;">FLOW</b></h1>
</div>

<div id="app-content">
    <header><h1>Merhaba, <span>Gelecek</span></h1></header>
    <div class="menu-grid">
        <div class="card" onclick="openZen()"><div class="card-icon">üßò‚Äç‚ôÇÔ∏è</div><div class="card-title">Zen Modu</div></div>
        <div class="card" onclick="openGrade()"><div class="card-icon">üìà</div><div class="card-title">Not Hesapla</div></div>
        <div class="card" onclick="openNotes()"><div class="card-icon">üìî</div><div class="card-title">Not Defterim</div></div>
        <div class="card" onclick="openProgram()"><div class="card-icon">üìö</div><div class="card-title">Program</div></div>
    </div>
    <div style="width:100%; text-align:center; margin-bottom:10px;">

<a href="https://docs.google.com/forms/d/e/1FAIpQLSdzegJ_Y3xJqcsEB4vrwMQbwtmGjciqU4Vrnz7xrTzSb-IcrQ/viewform"
   target="_blank"
   style="
     display:block;
     margin-top:12px;
     text-align:center;
     color:#ccc;
     font-size:13px;
     font-weight:700;
     text-decoration:none;
   ">
  üîß Hatamƒ± var? Geribildirim Ver!
</a> </button>

</div>
        <div class="footer-brand">Student Flow by Corevia</div>
    </div><div id="zen-modal" class="modal">
    <div onclick="setCustomTime()" style="padding:12px 25px; border-radius:25px; background:rgba(255,255,255,0.05); color:#00fff2; border:1px solid rgba(0,255,242,0.2);">‚úèÔ∏è S√ºre Belirle</div>
    <div class="timer-container">
        <svg class="timer-svg" viewBox="0 0 300 300">
            <circle class="bg" cx="150" cy="150" r="130"></circle>
            <circle id="progress-ring" class="progress" cx="150" cy="150" r="130"></circle>
        </svg>
        <div id="timer-text">25:00</div>
    </div>
    <div style="display:flex; gap:25px; align-items:center;">
        <button class="btn-circle" onclick="resetTimer()">‚Ü∫</button>
        <button class="btn-main" id="zen-main-btn" onclick="toggleTimer()">BA≈ûLAT</button>
        <button class="btn-circle" onclick="closeZen()">‚úï</button>
    </div>
</div>

<div id="grade-modal" class="modal" style="justify-content: flex-start; padding-top: 50px;">
    <h2 style="font-weight: 200; margin-bottom: 25px; letter-spacing: 2px;">NOT <b style="color:#00fff2">HESAPLA</b></h2>
    <div class="notes-sub-nav">
        <div class="tab-btn active" id="term-1-btn" onclick="switchTerm(1)">1. D√∂nem</div>
        <div class="tab-btn" id="term-2-btn" onclick="switchTerm(2)">2. D√∂nem</div>
        <div class="tab-btn" id="analysis-btn" onclick="switchTerm(3)" style="grid-column: span 2;">Performans / Analiz</div>
    </div>
    <div id="grade-entry-view">
        <div class="grade-header"><div>DERS ADI</div><div>1.S</div><div>2.S</div><div>ORT</div></div>
        <div id="grade-list" style="flex: 1; overflow-y: auto;"></div>
        <button onclick="addNewCourse()" style="width:100%; padding:18px; background:rgba(0,255,242,0.05); border:1px dashed #00fff2; color:#00fff2; border-radius:20px; margin: 15px 0; font-weight:800; flex-shrink: 0;">+ YENƒ∞ DERS EKLE</button>
        <div style="text-align:center; padding: 20px; background: rgba(255,255,255,0.03); border-radius: 25px; border: 1px solid rgba(255,255,255,0.05); flex-shrink: 0;">
            <div style="font-size: 11px; color: #888; margin-bottom: 5px;">YIL SONU BA≈ûARI PUANI</div>
            <span id="year-avg-display" style="font-size: 32px; font-weight: 800; color: #00fff2;">0.00</span>
        </div>
    </div>
    <div id="analysis-view"><div id="analysis-content"></div></div>
    <button class="btn-main" onclick="closeGrade()" style="width: 100%; margin-top: 20px; background: #222; color: white;">KAPAT</button>
</div>

<div id="notes-modal" class="modal" style="justify-content: flex-start; padding-top: 50px;">
    <div class="notes-sub-nav">
        <div class="tab-btn active" id="tab-n" onclick="switchNoteTab('note')">Not Defteri</div>
        <div class="tab-btn" id="tab-t" onclick="switchNoteTab('todo')">G√∂rev Listesi</div>
    </div>
    <div id="list-container" class="list-container"></div>
    <div class="input-area">
        <div class="input-row">
            <input type="text" id="main-input" placeholder="Yeni bir ≈üeyler ekle...">
            <button onclick="addItem()" style="background:#00fff2; border:none; color:#000; width:55px; height:55px; border-radius:18px; font-weight:800; font-size:24px; flex-shrink:0;">+</button>
        </div>
    </div>
    <button class="btn-main" onclick="closeNotes()" style="width: 100%; margin-top: 20px;">KAPAT</button>
</div>

<div id="program-modal" class="modal" style="justify-content: flex-start; padding-top: 50px;">
    <h2 style="font-weight: 200; margin-bottom: 20px;">HAFTALIK <b style="color:#ff005c">PROGRAM</b></h2>
    <div class="day-bar" id="day-bar"></div>
    <div id="prog-list-container" class="list-container"></div>
    <div class="input-area" style="background: rgba(255,0,92,0.05); border-color: rgba(255,0,92,0.2);">
        <div class="input-row">
            <input type="text" id="prog-input" placeholder="Ders / Etkinlik...">
            <input type="time" id="prog-time" style="color:#ff005c; width: 100px; flex:none;">
        </div>
        <div class="input-row">
            <input type="text" id="prog-note" placeholder="Konu veya kƒ±sa not...">
            <button onclick="addProgItem()" style="background:#ff005c; border:none; color:white; width:55px; height:55px; border-radius:18px; font-weight:800; font-size:24px; flex:none;">+</button>
        </div>
    </div>
    <button class="btn-main" onclick="closeProgram()" style="width: 100%; margin-top: 20px; background:#ff005c; color:white;">KAPAT</button>
</div>

<script>
    window.addEventListener('load', () => {
        setTimeout(() => {
            document.getElementById('splash-screen').style.opacity = '0';
            setTimeout(() => {
                document.getElementById('splash-screen').style.display = 'none';
                document.getElementById('app-content').style.display = 'block';
                setTimeout(() => {
                    document.getElementById('app-content').style.opacity = '1';
                    document.querySelectorAll('.card').forEach((c, i) => {
                        setTimeout(() => c.classList.add('animate-card'), i * 100);
                    });
                }, 50);
            }, 500);
        }, 1200);
    });

    // --- ZEN Sƒ∞STEMƒ∞ (GELƒ∞≈ûMƒ∞≈û) ---
    let initialSec = 25*60, leftSec = initialSec, timer = null, paused = true;
    
    function openZen() { 
        document.getElementById('zen-modal').style.display = 'flex'; 
        document.getElementById('mini-zen').style.display = 'none';
        document.getElementById('mini-zen').classList.remove('pop-in-anim'); // Animasyonu sƒ±fƒ±rla
        setTimeout(() => document.getElementById('zen-modal').style.opacity = '1', 10); 
    }
    
    function closeZen() { 
        document.getElementById('zen-modal').style.opacity = '0';
        setTimeout(() => {
            document.getElementById('zen-modal').style.display = 'none';
            if(!paused) {
                const pip = document.getElementById('mini-zen');
                pip.style.display = 'flex';
                pip.classList.add('pop-in-anim'); // Pat diye deƒüil, havalƒ± a√ßƒ±l
            }
        }, 400);
    }

    function toggleTimer() {
      if (leftSec <= 0) { resetTimer(); return; }
        const b = document.getElementById('zen-main-btn');
        if(paused) {
            if(leftSec <= 0) return; // Bittiƒüinde tekrar basmayƒ± engelle
            paused = false; b.innerText = "DURAKLAT"; b.style.background = "#ff005c";
            timer = setInterval(() => {
                if(leftSec > 0) { 
                    leftSec--; 
                    updateZenUI(); 
                } else { 
                    // S√úRE Bƒ∞TTƒ∞ EFEKTLERƒ∞
                    clearInterval(timer); 
                    b.innerText = "Bƒ∞TTƒ∞";
                    document.getElementById('timer-text').innerText = "Bƒ∞TTƒ∞";
                    document.getElementById('timer-text').classList.add('zen-finished-text'); // Ana ekran titrer/kƒ±zarƒ±r
                    
                    // PIP (Mini) Efektleri
                    const pip = document.getElementById('mini-zen');
                    const pipText = document.getElementById('mini-timer-text');
                    const pipInd = document.getElementById('mini-indicator');
                    
                    pipText.innerText = "Bƒ∞TTƒ∞";
                    pipInd.style.background = "white"; // G√∂sterge rengi
                    pip.classList.add('pip-finished'); // Titreme ve kƒ±rmƒ±zƒ± renk
                }
            }, 1000);
        } else {
            paused = true; b.innerText = "DEVAM ET"; b.style.background = "#00fff2";
            clearInterval(timer);
        }
    }

    function updateZenUI() {
        const m = Math.floor(leftSec/60), s = leftSec%60;
        const str = `${m.toString().padStart(2,'0')}:${s.toString().padStart(2,'0')}`;
        document.getElementById('timer-text').innerText = str;
        document.getElementById('mini-timer-text').innerText = str;
        document.getElementById('progress-ring').style.strokeDashoffset = 816 - (816 * (initialSec - leftSec) / initialSec);
    }

    function resetTimer() { 
        paused = true; clearInterval(timer); leftSec = initialSec; 
        
        // UI SIFIRLAMA
        updateZenUI(); 
        document.getElementById('zen-main-btn').innerText = "BA≈ûLAT"; 
        document.getElementById('zen-main-btn').style.background = "#00fff2";
        
        // Efektleri Temizle
        document.getElementById('timer-text').style.color = "";
        document.getElementById('timer-text').classList.remove('zen-finished-text');
        
        const pip = document.getElementById('mini-zen');
        pip.classList.remove('pip-finished');
        document.getElementById('mini-indicator').style.background = "#00fff2";
    }

    function setCustomTime() { let m = prompt("Ka√ß dakika √ßalƒ±≈üacaksƒ±n?", "25"); if(m) { initialSec = m*60; resetTimer(); } }

    // --- NOT HESAPLAMA Sƒ∞STEMƒ∞ ---
    let curTerm = 1;
    let gData = JSON.parse(localStorage.getItem('sf_grades')) || { term1: [], term2: [] };
    function openGrade() { document.getElementById('grade-modal').style.display = 'flex'; setTimeout(() => document.getElementById('grade-modal').style.opacity = '1', 10); renderGrades(); }
    function closeGrade() { document.getElementById('grade-modal').style.opacity = '0'; setTimeout(() => document.getElementById('grade-modal').style.display = 'none', 400); }
    function switchTerm(t) {
        curTerm = t;
        document.getElementById('term-1-btn').className = t === 1 ? 'tab-btn active' : 'tab-btn';
        document.getElementById('term-2-btn').className = t === 2 ? 'tab-btn active' : 'tab-btn';
        document.getElementById('analysis-btn').className = t === 3 ? 'tab-btn active' : 'tab-btn';
        document.getElementById('grade-entry-view').style.display = t === 3 ? 'none' : 'flex';
        document.getElementById('analysis-view').style.display = t === 3 ? 'block' : 'none';
        if(t === 3) renderAnalysis(); else renderGrades();
    }
    function addNewCourse() {
        const key = curTerm === 1 ? 'term1' : 'term2';
        gData[key].push({ id: Date.now(), name: '', n1: '', n2: '' });
        saveG(); renderGrades();
    }
    function updateG(id, f, v) {
        const key = curTerm === 1 ? 'term1' : 'term2';
        const c = gData[key].find(x => x.id === id);
        if(c) { c[f] = v; saveG(); calcAllAvg(); }
}
    function removeG(id) {
        const key = curTerm === 1 ? 'term1' : 'term2';
        gData[key] = gData[key].filter(x => x.id !== id);
        saveG(); renderGrades();
    }
    function renderGrades() {
        const list = document.getElementById('grade-list');
        const key = curTerm === 1 ? 'term1' : 'term2';
        list.innerHTML = '';
        gData[key].forEach(c => {
            let n1 = parseFloat(c.n1), n2 = parseFloat(c.n2), avg = (isNaN(n1)) ? '-' : (isNaN(n2) ? n1 : (n1+n2)/2);
            list.innerHTML += `<div class="grade-row">
                <input type="text" value="${c.name}" placeholder="Ders..." oninput="updateG(${c.id}, 'name', this.value)">
                <input type="number" value="${c.n1}" placeholder="-" oninput="updateG(${c.id}, 'n1', this.value)">
                <input type="number" value="${c.n2}" placeholder="-" oninput="updateG(${c.id}, 'n2', this.value)">
                <div class="grade-avg-box">${avg === '-' ? '-' : avg.toFixed(1)}</div>
                <div onclick="removeG(${c.id})" style="color:#ff005c; font-size:12px; font-weight:bold;">‚úñ</div>
            </div>`;
        });
        calcAllAvg();
    }
    function calcAllAvg() {
        const f = (l) => {
            let t = 0, c = 0;
            l.forEach(x => { if(!isNaN(parseFloat(x.n1))) { t += isNaN(parseFloat(x.n2)) ? parseFloat(x.n1) : (parseFloat(x.n1)+parseFloat(x.n2))/2; c++; } });
            return c > 0 ? t/c : 0;
        };
        const r1 = f(gData.term1), r2 = f(gData.term2);
        document.getElementById('year-avg-display').innerText = ((r1 + r2) / (r1 > 0 && r2 > 0 ? 2 : 1)).toFixed(2);
    }
    
    function renderAnalysis() {
        const cont = document.getElementById('analysis-content');
        cont.innerHTML = '<h3 style="color:#00fff2; margin: 10px 0 20px 0;">MENTOR ANALƒ∞Zƒ∞</h3>';
        const all = [...gData.term1, ...gData.term2];
        if(all.length === 0) cont.innerHTML += '<p style="color:#666">Hen√ºz analiz edilecek not yok.</p>';
        all.forEach(c => {
            let n1 = parseFloat(c.n1), n2 = parseFloat(c.n2);
            if(!c.name || isNaN(n1)) return;
            let avg = isNaN(n2) ? n1 : (n1+n2)/2;
            let msg = "", color = "#00fff2";
            
            if(avg < 50) { msg = "‚ö†Ô∏è Bu ders biraz kritik. Temel eksikleri kapatmak i√ßin konu tekrarƒ± ≈üart!"; color="#ff005c"; }
            else if(avg < 70) { msg = "üí° Fena deƒüil ama potansiyelin daha y√ºksek. Biraz pratikle notunu u√ßurabilirsin."; color="#ffca00"; }
            else if(avg < 85) { msg = "üî• √áok iyi gidiyorsun! ƒ∞stikrarƒ±nƒ± korursan harika sonu√ßlar gelecek."; color="#00fff2"; }
            else { msg = "üèÜ M√ºkemmel! Bu derste adeta ≈üov yapƒ±yorsun, aynen devam!"; color="#00ff00"; }

            cont.innerHTML += `<div style="background:rgba(255,255,255,0.05); padding:15px; border-radius:20px; margin-bottom:12px; border-left:4px solid ${color};">
                <div style="font-weight:800; font-size:16px; margin-bottom:5px; color:${color}">${c.name} (${avg.toFixed(1)})</div>
                <div style="font-size:13px; color:#ddd; line-height:1.4;">${msg}</div>
            </div>`;
        });
    }
    function saveG() { localStorage.setItem('sf_grades', JSON.stringify(gData)); }

    // --- NOT DEFTERƒ∞ & G√ñREV Lƒ∞STESƒ∞ ---
    let curNTab = 'note', nItems = JSON.parse(localStorage.getItem('sf_notes')) || { note: [], todo: [] };
    function openNotes() { document.getElementById('notes-modal').style.display = 'flex'; setTimeout(() => document.getElementById('notes-modal').style.opacity = '1', 10); renderN(); }
    function closeNotes() { document.getElementById('notes-modal').style.opacity = '0'; setTimeout(() => document.getElementById('notes-modal').style.display = 'none', 400); }
    function switchNoteTab(t) { curNTab = t; document.getElementById('tab-n').className = t === 'note' ? 'tab-btn active' : 'tab-btn'; document.getElementById('tab-t').className = t === 'todo' ? 'tab-btn active' : 'tab-btn'; renderN(); }
    function addItem() {
        const inp = document.getElementById('main-input');
        if(!inp.value.trim()) return;
        nItems[curNTab].push({ id: Date.now(), text: inp.value, pinned: false });
        inp.value = ''; saveN(); renderN();
    }
    function togglePin(id) { const item = nItems[curNTab].find(x => x.id === id); if(item) { item.pinned = !item.pinned; saveN(); renderN(); } }
    function delN(id) { nItems[curNTab] = nItems[curNTab].filter(x => x.id !== id); saveN(); renderN(); }
    
    function renderN() {
        const cont = document.getElementById('list-container');
        const sorted = [...nItems[curNTab]].sort((a,b) => b.pinned - a.pinned);
        cont.innerHTML = sorted.map((x, index) => `<div class="note-item ${x.pinned ? 'pinned' : ''}">
            <div style="display:flex; justify-content:space-between; align-items:center;">
                <span style="font-size:15px;">${curNTab === 'todo' ? `<b>${index + 1}- </b>` : ''}${x.text}</span>
                <div style="display:flex; gap:15px;">
                    <span onclick="togglePin(${x.id})">${x.pinned ? 'üìå' : 'üìç'}</span>
                    <span onclick="delN(${x.id})">üóëÔ∏è</span>
                </div>
            </div>
        </div>`).join('');
    }
    function saveN() { localStorage.setItem('sf_notes', JSON.stringify(nItems)); }

    // --- PROGRAM Sƒ∞STEMƒ∞ ---
    const days = ["Pazartesi", "Salƒ±", "√áar≈üamba", "Per≈üembe", "Cuma", "Cumartesi", "Pazar"];
    let curDay = days[new Date().getDay() === 0 ? 6 : new Date().getDay()-1];
    let pData = JSON.parse(localStorage.getItem('sf_prog')) || { "Pazartesi":[], "Salƒ±":[], "√áar≈üamba":[], "Per≈üembe":[], "Cuma":[], "Cumartesi":[], "Pazar":[] };
    
    function openProgram() { document.getElementById('program-modal').style.display = 'flex'; setTimeout(() => document.getElementById('program-modal').style.opacity = '1', 10); renderP(); }
    function closeProgram() { document.getElementById('program-modal').style.opacity = '0'; setTimeout(() => document.getElementById('program-modal').style.display = 'none', 400); }
    function setDay(d) { curDay = d; renderP(); }
    
    function renderP() {
        document.getElementById('day-bar').innerHTML = days.map(d => `<div class="day-btn ${d === curDay ? 'active':''}" onclick="setDay('${d}')">${d}</div>`).join('');
        const cont = document.getElementById('prog-list-container');
        if(!pData[curDay]) pData[curDay] = [];
        cont.innerHTML = pData[curDay].map(x => `<div class="prog-item">
            <div style="display:flex; justify-content:space-between; align-items:center;">
                <div><b style="color:#ff005c; margin-right:10px; font-size:16px;">${x.time}</b><span style="font-weight:600;">${x.name}</span></div>
                <div onclick="delP(${x.id})" style="color:#666">‚úï</div>
            </div>
            ${x.note ? `<div style="font-size:12px; color:#888; margin-top:8px; padding-top:8px; border-top:1px solid rgba(255,255,255,0.05);">üìå ${x.note}</div>` : ''}
        </div>`).join('');
    }

    function addProgItem() {
        const n = document.getElementById('prog-input'), t = document.getElementById('prog-time'), nt = document.getElementById('prog-note');
        if(!n.value || !t.value) { alert("L√ºtfen ders adƒ± ve saati girin!"); return; }
        if(!pData[curDay]) pData[curDay] = [];
        pData[curDay].push({ id: Date.now(), name: n.value, time: t.value, note: nt.value });
        pData[curDay].sort((a,b) => a.time.localeCompare(b.time));
        localStorage.setItem('sf_prog', JSON.stringify(pData));
        n.value = ''; nt.value = ''; t.value = ''; renderP();
    }

    function delP(id) {
    pData[curDay] = pData[curDay].filter(x => x.id !== id);
    localStorage.setItem('sf_prog', JSON.stringify(pData));
    renderP();
  }
setTimeout(() => {
  const fb = document.getElementById("feedback-wrapper");
  if (fb) fb.style.display = "block";
}, 4000);
</script>

<div id="feedback-wrapper" style="margin:24px 0; text-align:center; display:none;">
  <a id="feedback-link"
     href="https://docs.google.com/forms/d/e/1FAIpQLSdzegJ_Y3xJqcsEB4vrwMQbwtmGjciqU4Vrnz7xrTzSb-IcrQ/viewform"
     target="_blank"
     rel="noopener"
     style="
       display:inline-block;
       padding:10px 16px;
       color:#ccc;
       font-size:13px;
       font-weight:700;
       text-decoration:none;
     ">
    üîß Hatamƒ± var? Geribildirim Ver!
  </a>
</div>

</body>
</html>
